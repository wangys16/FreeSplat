# @package _global_

defaults:
  - override /dataset: scannet_cost
  - override /model/encoder: epipolar_cost
  - override /model/encoder/backbone: efficientnet
  - override /loss: [mse, lpips]

wandb:
  name: scannet
  tags: [scannet, 384x512]

dataset:
  image_shape: [384, 512]
  roots: [/home/wang/ssd/scannet/scannet_surn/scannet]
  near: 0.5
  far: 15.
  view_sampler:
    num_context_views: 3

model:
  encoder:
    n_levels: -1
    num_views: 3
    fusion: true
    num_depth_candidates: 128

data_loader:
  train:
    batch_size: 1

loss:
  lpips:
    apply_after_step: 0
    weight: 0.05

trainer:
  max_steps: 300_001

train:
  depth_sup: true
  depth_mode: depth
